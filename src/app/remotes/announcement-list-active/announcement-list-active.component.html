<ng-container *ngIf="announcements$ | async as announcements">
  <!-- UNDERGROUND and DIMENSIONs -->
  <div class="surface-200 m-0 p-2 sm:p-3 overflow-hidden">
    <div class="flex flex-column row-gap-2 px-1">
      <!-- TITLE -->
      <div class="mb-2 text-base md:text-lg font-bold">Announcements</div>
      <!-- LIST -->
      <a
        *ngFor="let announcement of announcements; let i = index"
        class="announcement-row block flex flex-row flex-nowrap justify-content-start align-items-center column-gap-3 border-none border-bottom-1 border-solid border-gray-400 cursor-pointer"
        (click)="detailDialog.toggle($event)"
      >
        <div class="font-bold" aria-hidden="true">
          <div
            [id]="'am_list_active_data_row_' + i + '_icon'"
            class="pi text-base md:text-xl"
            [ngClass]="
              announcement.type === 'EVENT'
                ? 'pi-calendar'
                : announcement.type === 'INFO'
                  ? 'pi-info-circle'
                  : announcement.type === 'SYSTEM_MAINTENANCE'
                    ? 'pi-wrench'
                    : 'pi-info-circle'
            "
          ></div>
        </div>
        <div class="mb-2 w-11 flex flex-column row-gap-1">
          <div
            [id]="'am_list_active_data_row_' + i + '_title'"
            class="text-sm sm:text-base md:text-md font-bold white-space-nowrap overflow-hidden text-overflow-ellipsis"
          >
            {{ announcement.title }}
          </div>
          <div
            [id]="'am_list_active_data_row_' + i + '_content'"
            class="text-xs sm:text-sm md:text-base white-space-nowrap overflow-hidden text-overflow-ellipsis"
          >
            {{ announcement.content }}
          </div>
        </div>

        <!-- DETAIL 
             is located here due to use the same data => is absolute displayed ! -->
        <p-overlayPanel
          #detailDialog
          [dismissable]="true"
          [showCloseIcon]="false"
          styleClass="sm:m-0 w-11 sm:max-w-28rem md:max-w-30rem lg:max-w-40rem"
        >
          <div class="flex flex-column row-gap-2 px-1">
            <div
              [id]="'am_list_active_data_row_' + i + '_detail_icon'"
              class="pi text-base sm:text-lg md:text-xl"
              [ngClass]="
                announcement.type === 'EVENT'
                  ? 'pi-calendar'
                  : announcement.type === 'INFO'
                    ? 'pi-info-circle'
                    : announcement.type === 'SYSTEM_MAINTENANCE'
                      ? 'pi-wrench'
                      : 'pi-info-circle'
              "
            ></div>
            <div
              [id]="'am_list_active_data_row_' + i + '_detail_title'"
              class="text-sm sm:text-base md:text-lg font-bold"
            >
              {{ announcement.title }}
            </div>
            <div [id]="'am_list_active_data_row_' + i + '_detail_content'" class="text-xs sm:text-sm md:text-base">
              {{ announcement.content }}
            </div>
          </div>
        </p-overlayPanel>
      </a>
    </div>
  </div>
</ng-container>
