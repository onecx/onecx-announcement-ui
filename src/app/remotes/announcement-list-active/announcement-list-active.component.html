<ng-container *ngIf="announcements$ | async as announcements">
  <div [ocxContent]="'Announcements'" class="surface-200 m-0 overflow-hidden">
    <div class="flex flex-column row-gap-2 px-1">
      <a
        *ngFor="let announcement of announcements"
        class="announcement-row block flex flex-row flex-nowrap justify-content-start align-items-center column-gap-3 hover:font-bold cursor-pointer border-none border-bottom-1 border-solid border-gray-400"
        (click)="announcementContent.toggle($event)"
      >
        <div
          class="font-bold"
          [ngClass]="
            announcement.priority === 'IMPORTANT'
              ? 'text-red-600'
              : announcement.priority === 'NORMAL'
                ? 'text-yellow-600'
                : announcement.priority === 'LOW'
                  ? 'text-blue-600'
                  : 'text-green-600'
          "
          aria-hidden="true"
        >
          <div
            id="am_announcement_list_active_icon"
            class="pi text-xl"
            [ngClass]="
              announcement.type === 'EVENT'
                ? 'pi-calendar'
                : announcement.type === 'INFO'
                  ? 'pi-info-circle'
                  : announcement.type === 'SYSTEM_MAINTENANCE'
                    ? 'pi-wrench'
                    : 'pi-info-circle'
            "
          ></div>
        </div>
        <div class="mb-2">
          <div
            [id]="'am_announcement_list_active_data_row_' + '_title'"
            class="mb-1 text-base sm:text-md font-bold white-space-nowrap text-overflow-hidden text-overflow-ellipsis"
          >
            {{ limitText(announcement.title, 70) }}
          </div>
          <div [id]="'am_announcement_list_active_data_row_' + '_content'" class="sm:text-base">
            {{ limitText(announcement.content, 100) }}
          </div>
        </div>
      </a>
    </div>
  </div>
  <p-overlayPanel #announcementContent>
    <div class="">Hallo Henry</div>
  </p-overlayPanel>
</ng-container>
